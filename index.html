<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="ci-phpunit-test : An easier way to use PHPUnit with CodeIgniter 3.0.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>ci-phpunit-test</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/kenjis/ci-phpunit-test">View on GitHub</a>

          <h1 id="project_title">ci-phpunit-test</h1>
          <h2 id="project_tagline">An easier way to use PHPUnit with CodeIgniter 3.0.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/kenjis/ci-phpunit-test/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/kenjis/ci-phpunit-test/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="ci-phpunit-test-for-codeigniter-30" class="anchor" href="#ci-phpunit-test-for-codeigniter-30" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>ci-phpunit-test for CodeIgniter 3.0</h1>

<p><a href="https://packagist.org/packages/kenjis/ci-phpunit-test"><img src="https://poser.pugx.org/kenjis/ci-phpunit-test/v/stable" alt="Latest Stable Version"></a> <a href="https://packagist.org/packages/kenjis/ci-phpunit-test"><img src="https://poser.pugx.org/kenjis/ci-phpunit-test/downloads" alt="Total Downloads"></a> <a href="https://packagist.org/packages/kenjis/ci-phpunit-test"><img src="https://poser.pugx.org/kenjis/ci-phpunit-test/v/unstable" alt="Latest Unstable Version"></a> <a href="https://packagist.org/packages/kenjis/ci-phpunit-test"><img src="https://poser.pugx.org/kenjis/ci-phpunit-test/license" alt="License"></a></p>

<p><a href="https://scrutinizer-ci.com/g/kenjis/ci-phpunit-test/?branch=master"><img src="https://scrutinizer-ci.com/g/kenjis/ci-phpunit-test/badges/quality-score.png?b=master" alt="Scrutinizer Code Quality"></a>
<a href="https://coveralls.io/r/kenjis/ci-phpunit-test?branch=master"><img src="https://coveralls.io/repos/kenjis/ci-phpunit-test/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://travis-ci.org/kenjis/ci-phpunit-test"><img src="https://travis-ci.org/kenjis/ci-phpunit-test.svg?branch=master" alt="Build Status"></a></p>

<p>An easier way to use PHPUnit with <a href="https://github.com/bcit-ci/CodeIgniter">CodeIgniter</a> 3.0.</p>

<ul>
<li>You don't have to modify CodeIgniter core files at all.</li>
<li>You can write controller tests easily.</li>
<li>Nothing is untestable, maybe.</li>
<li>Well documented.</li>
</ul>

<p><img src="https://pbs.twimg.com/media/CUUmhxWVAAAwx3b.png" alt="Screenshot: Running tests on NetBeans 8.1"></p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>PHP 5.4.0 or later</li>
<li>CodeIgniter 3.0.*</li>
<li>PHPUnit 4.3 or later (4.7 or later is recommended)

<ul>
<li>If you use NetBeans 8.0.2, please use 4.7. 4.8 is not compatible yet. You can download old version of <code>phpunit.phar</code> from <a href="https://phar.phpunit.de/">https://phar.phpunit.de/</a>.</li>
</ul>
</li>
</ul>

<h2>
<a id="optional" class="anchor" href="#optional" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Optional</h2>

<ul>
<li>NetBeans

<ul>
<li>Go to <em>Project Properties &gt; Testing &gt; PHPUnit</em>, check <em>Use Custom Test Suite</em> checkbox, and select <code>application/tests/_ci_phpunit_test/TestSuiteProvider.php</code>.</li>
</ul>
</li>
</ul>

<h2>
<a id="change-log" class="anchor" href="#change-log" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Change Log</h2>

<p>See <a href="https://github.com/kenjis/ci-phpunit-test/blob/master/docs/ChangeLog.md">Change Log</a>.</p>

<h2>
<a id="folder-structure" class="anchor" href="#folder-structure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Folder Structure</h2>

<pre><code>codeigniter/
├── application/
│   └── tests/
│        ├── _ci_phpunit_test/ ... don't touch! files ci-phpunit-test uses
│        ├── Bootstrap.php     ... bootstrap file for PHPUnit
│        ├── TestCase.php      ... TestCase class
│        ├── controllers/      ... put your controller tests
│        ├── libraries/        ... put your library tests
│        ├── mocks/
│        │   └── libraries/    ... mock libraries
│        ├── models/           ... put your model tests
│        └── phpunit.xml       ... config file for PHPUnit
└── vendor/
</code></pre>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Download latest <code>ci-phpunit-test</code>: <a href="https://github.com/kenjis/ci-phpunit-test/releases">https://github.com/kenjis/ci-phpunit-test/releases</a></p>

<p>Unzip and copy <code>application/tests</code> folder into your <code>application</code> folder in CodeIgniter project. That's it.</p>

<h3>
<a id="installation-via-composer" class="anchor" href="#installation-via-composer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation via Composer</h3>

<p>If you like Composer:</p>

<pre><code>$ cd /path/to/codeigniter/
$ composer require kenjis/ci-phpunit-test --dev
</code></pre>

<p>And run <code>install.php</code>:</p>

<pre><code>$ php vendor/kenjis/ci-phpunit-test/install.php
</code></pre>

<ul>
<li>Above command always overwrites exisiting files.</li>
<li>You must run it at CodeIgniter project root folder.</li>
</ul>

<h2>
<a id="upgrading" class="anchor" href="#upgrading" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Upgrading</h2>

<p>Download latest <code>ci-phpunit-test</code>: <a href="https://github.com/kenjis/ci-phpunit-test/releases">https://github.com/kenjis/ci-phpunit-test/releases</a></p>

<p>Unzip and replace <code>application/tests/_ci_phpunit_test</code> folder.</p>

<h3>
<a id="upgrading-via-composer" class="anchor" href="#upgrading-via-composer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Upgrading via Composer</h3>

<p>If you like Composer:</p>

<pre><code>$ cd /path/to/codeigniter/
$ composer update kenjis/ci-phpunit-test
$ php vendor/kenjis/ci-phpunit-test/update.php
</code></pre>

<h2>
<a id="how-to-run-tests" class="anchor" href="#how-to-run-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to Run Tests</h2>

<p>You have to install PHPUnit before running tests.</p>

<p><strong>Note:</strong> You must run <code>phpunit</code> command in <code>application/tests</code> folder.</p>

<pre><code>$ cd /path/to/codeigniter/
$ cd application/tests/
$ phpunit
PHPUnit 4.7.7 by Sebastian Bergmann and contributors.

...

Time: 341 ms, Memory: 5.50Mb

OK (3 tests, 3 assertions)

Generating code coverage report in Clover XML format ... done

Generating code coverage report in HTML format ... done
</code></pre>

<p>To generate coverage report, Xdebug is needed.</p>

<p>If you want to run a single test case file:</p>

<pre><code>$ phpunit models/Category_model_test.php
</code></pre>

<h2>
<a id="how-to-write-tests" class="anchor" href="#how-to-write-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to Write Tests</h2>

<p>As an example, a test case class for <code>Inventory_model</code> would be as follows:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">Inventory_model_test</span> <span class="pl-k">extends</span> <span class="pl-e">TestCase</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">setUp</span>()</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>resetInstance();</span>
<span class="pl-s1">        <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">CI</span><span class="pl-k">-&gt;</span><span class="pl-smi">load</span><span class="pl-k">-&gt;</span>model(<span class="pl-s"><span class="pl-pds">'</span>Inventory_model<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1">        <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">obj</span> <span class="pl-k">=</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">CI</span><span class="pl-k">-&gt;</span><span class="pl-smi">Inventory_model</span>;</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">test_get_category_list</span>()</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-smi">$expected</span> <span class="pl-k">=</span> [</span>
<span class="pl-s1">            <span class="pl-c1">1</span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>Book<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-c1">2</span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>CD<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">            <span class="pl-c1">3</span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">'</span>DVD<span class="pl-pds">'</span></span>,</span>
<span class="pl-s1">        ];</span>
<span class="pl-s1">        <span class="pl-smi">$list</span> <span class="pl-k">=</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">obj</span><span class="pl-k">-&gt;</span>get_category_list();</span>
<span class="pl-s1">        <span class="pl-k">foreach</span> (<span class="pl-smi">$list</span> <span class="pl-k">as</span> <span class="pl-smi">$category</span>) {</span>
<span class="pl-s1">            <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>assertEquals(<span class="pl-smi">$expected</span>[<span class="pl-smi">$category</span><span class="pl-k">-&gt;</span><span class="pl-smi">id</span>], <span class="pl-smi">$category</span><span class="pl-k">-&gt;</span><span class="pl-smi">name</span>);</span>
<span class="pl-s1">        }</span>
<span class="pl-s1">    }</span>
<span class="pl-s1"></span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">test_get_category_name</span>()</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-smi">$actual</span> <span class="pl-k">=</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span><span class="pl-smi">obj</span><span class="pl-k">-&gt;</span>get_category_name(<span class="pl-c1">1</span>);</span>
<span class="pl-s1">        <span class="pl-smi">$expected</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Book<span class="pl-pds">'</span></span>;</span>
<span class="pl-s1">        <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>assertEquals(<span class="pl-smi">$expected</span>, <span class="pl-smi">$actual</span>);</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>As an example, a test case class for Welcome controller would be as follows:</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-pse">&lt;?php</span><span class="pl-s1"></span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-k">class</span> <span class="pl-en">Welcome_test</span> <span class="pl-k">extends</span> <span class="pl-e">TestCase</span></span>
<span class="pl-s1">{</span>
<span class="pl-s1">    <span class="pl-k">public</span> <span class="pl-k">function</span> <span class="pl-en">test_index</span>()</span>
<span class="pl-s1">    {</span>
<span class="pl-s1">        <span class="pl-smi">$output</span> <span class="pl-k">=</span> <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>request(<span class="pl-s"><span class="pl-pds">'</span>GET<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>welcome/index<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1">        <span class="pl-smi">$this</span><span class="pl-k">-&gt;</span>assertContains(</span>
<span class="pl-s1">            <span class="pl-s"><span class="pl-pds">'</span>&lt;title&gt;Welcome to CodeIgniter&lt;/title&gt;<span class="pl-pds">'</span></span>, <span class="pl-smi">$output</span></span>
<span class="pl-s1">        );</span>
<span class="pl-s1">    }</span>
<span class="pl-s1">}</span></pre></div>

<p>See <a href="https://github.com/kenjis/ci-phpunit-test/blob/master/docs/HowToWriteTests.md">How to Write Tests</a> for details.</p>

<h2>
<a id="functionclass-reference" class="anchor" href="#functionclass-reference" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Function/Class Reference</h2>

<p>See <a href="https://github.com/kenjis/ci-phpunit-test/blob/master/docs/FunctionAndClassReference.md">Function and Class Reference</a>.</p>

<h2>
<a id="related-projects-for-codeigniter-30" class="anchor" href="#related-projects-for-codeigniter-30" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Related Projects for CodeIgniter 3.0</h2>

<ul>
<li><a href="https://github.com/kenjis/codeigniter-composer-installer">CodeIgniter Composer Installer</a></li>
<li><a href="https://github.com/kenjis/codeigniter-cli">Cli for CodeIgniter 3.0</a></li>
<li><a href="https://github.com/kenjis/codeigniter-ss-twig">CodeIgniter Simple and Secure Twig</a></li>
<li><a href="https://github.com/kenjis/codeigniter-doctrine">CodeIgniter Doctrine</a></li>
<li><a href="https://github.com/kenjis/codeigniter-deployer">CodeIgniter Deployer</a></li>
<li><a href="https://github.com/kenjis/codeigniter3-filename-checker">CodeIgniter3 Filename Checker</a></li>
<li><a href="https://github.com/kenjis/codeigniter-widgets">CodeIgniter Widget (View Partial) Sample</a></li>
<li><a href="https://github.com/kenjis/codeigniter3-namespaced-controller">CodeIgniter3 Namespaced Controller</a></li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">ci-phpunit-test maintained by <a href="https://github.com/kenjis">kenjis</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
